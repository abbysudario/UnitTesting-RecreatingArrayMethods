<script src="../simpletest.js"></script>
<script>

//Prototype Implementation:

//Function signature:
  //arr.lastIndexOf(searchElement[, fromIndex])

//Callback parameters:
  //searchElement
  //fromIndex

//Return Value: 
  //The last index of the element in the array
  //-1 if not found.

//Description: 
//lastIndexOf() compares searchElement to elements of the Array using strict equality (the same method used by the === or triple-equals operator).

function lastIndexOf(array, searchElement, fromIndex) {
    var arrayLength = array.length
    var startIndex = arrayLength - 1;

    if(fromIndex) {
        startIndex = fromIndex;
    }
    if(fromIndex && fromIndex >= arrayLength ) {
        startIndex = arrayLength - 1;
    }
    for(i = startIndex; i >=0; i--) {
        if(searchElement === array[i]) {
            return i;
        }
    }
    return -1;
}

tests({
  'It should return the last index of the searchElement in the array.': function() {
    var lastIndexOfResult = lastIndexOf([1, 2, 3, 2], 2);
    eq(lastIndexOfResult, 3);
  },
  'It should return -1 if the searchElement is not present in the array.': function() {
    var lastIndexOfResult = lastIndexOf([1, 2, 3], 5);
    eq(lastIndexOfResult, -1)
  },
  'It should start searching from the index passed in as the 3rd parameter.': function() {
    var lastIndexOfResult = lastIndexOf([1, 1, 1], 1, 1);
    eq(lastIndexOfResult, 1);
  },
  'If the fromIndex value is negative, it is taken as the offset from the end of the array.': function() {
    var lastIndexOfResult = lastIndexOf([1, 2], 1, -1);
    eq(lastIndexOfResult, -1)
  },
  'It should search the whole aray, if from Index value is greater than or equal to the array length, ': function() {
    var lastIndexOfResult = lastIndexOf([1, 2, 3], 2, 5);
    eq(lastIndexOfResult, 1);
  },
  'It should search the whole array if no index is provided.': function() {
    var lastIndexOfResult = lastIndexOf([1, 2, 3],2);
    eq(lastIndexOfResult, 1);
  },
  'It should search the whole array if the provided index is 0.': function() {
    var lastIndexOfResult = lastIndexOf([1, 2, 3], 2, 0);
    eq(lastIndexOfResult, 1);
  }


})

</script>